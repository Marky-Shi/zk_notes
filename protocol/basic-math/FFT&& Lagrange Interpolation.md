Background

在零知识证明中，许多计算都会被转化为多项式问题，特别是在 PLONK、Halo2、STARK 等框架中：

​	•将电路变量用多项式表示（如约束多项式）。

​	•在验证中需要检查多项式是否满足特定的性质（如零点约束）。



这些多项式需要以特定的形式表示和操作。FFT 和拉格朗日插值分别解决了两大问题：

​	1.高效地在点值表示和系数表示之间转换。

​	2.快速插值出满足约束的多项式。

## FFT

FFT（快速傅里叶变换）用于高效计算多项式的点值表示（evaluation form）。在多项式证明中，点值表示比系数表示更适合直接操作。

职责/功能：

* 点值评估

  * 给定多项式
    $$
    P(x) = \sum_{i=0}^{n-1} c_i \cdot x^i
    $$
    ，FFT 高效计算其在根集合
    $$
    \{\omega^0, \omega^1, \ldots, \omega^{n-1}\}
    $$
    上的点值：


    $$
    P(\omega^j) \quad \text{for } j = 0, 1, \ldots, n-1
    $$

* 快速插值

  * FFT 的逆变换（IFFT）可以将点值形式的多项式快速转换为系数形式。

#### **应用场景**

​	•**构造证明：** 将电路变量从系数形式转换为点值形式，方便约束检查。

​	•**验证阶段：** 验证者对证明多项式进行评估时，需要高效计算其点值。



#### **性能优势**

FFT 的复杂度是
$$
O(n \log n)
$$
，而直接多项式评估需要
$$
O(n^2)
$$
 。在大规模电路中，FFT 大幅提高了计算效率。（具体可参考算法导论第三版多项式一章）



## Lagrange Interpolation

拉格朗日插值是从点值形式重建多项式的一种数学方法。其作用是直接构造出在特定点集合上具有特定值的多项式。

**具体功能**

​	1.**拉格朗日基底：**

给定一组点
$$
\{\omega^0, \omega^1, \ldots, \omega^{n-1}\}
$$
 ，构造基底多项式 L_i(X) ：


$$
L_i(X) = \prod_{j \neq i} \frac{X - \omega^j}{\omega^i - \omega^j}
$$


使得
$$
L_i(\omega^j) = \delta_{ij} （Kronecker delta）
$$
。

​	2.**多项式重构：**

利用点值重构多项式：
$$
P(X) = \sum_{i=0}^{n-1} P(\omega^i) \cdot L_i(X)
$$




**应用场景**

​	•**构造证明：** 在多项式分段验证中，通过拉格朗日插值直接生成满足约束的多项式。

​	•**多项式零知识扩展：** 通过插值生成随机化多项式，隐藏原始信息。



**性能优势**

​	•利用 FFT，可以快速构造拉格朗日基底，使得插值变得高效。

​	•拉格朗日插值避免了符号计算，直接在数值域中操作。

```python
from scipy.interpolate import lagrange
def lagrange_interpolation():
      x_values = [1, 2, 3, 4]
      y_values = [4, 8, 2, 1]
      return lagrange(x_values, y_values)
```



### 在zkp中的应用

**多项式的点值和验证**

1. *证明生成阶段：*
   1. 电路中的变量和约束被编码为多项式。
   2. FFT 用于高效计算这些多项式在特定点集上的值。

2.*验证阶段：*

    1.验证者检查约束是否满足特定性质（如多项式在某些点上是否为零）。

    2.点值表示使得验证过程高效，因为验证者只需要检查多项式的若干点值而无需还原整个多项式。

### 总结

FFT 和拉格朗日插值的核心作用是：

  1.**在点值表示和系数表示之间快速转换。**

  2.**高效重构多项式，用于验证约束。**

  3.**降低计算复杂度，适应大规模电路验证的需求。**
